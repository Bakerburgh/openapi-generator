##nodejs-express-server
This module is an update to the nodejs-server module for auto-generating the infrastructure of swagger/openapi based projects. This module creates an environment based on express.js, using updated node modules and conventions. 
#####prerequesits:
Node.js => 8.9.*

Currently, this module generates code based on Swagger v2 yaml documents only. OpenApi v3 will be supported soon after v2 is up and running.

At this point there's no support for security handling. Once the routing and the regular 

This module contains the following directories/files:

###### .eslintrc
JavaScript linter, extending the airbnb specification, with one change - allowing for console usage.

###### README.md
 This file
	
###### app.js
This is where application launches - it imports our express implementation and our Swagger/OpenAPI router and launches the server.

###### config.js
Configuration file. Note that this is a js file, with code and slight business-logic and not a straight json file

###### expressServer.js
Our implementation of the express server, together with the needed 3rd-party libraries, except for our routing and security middleware - Those are currently loaded in app.js. In the future we might join app.js and expressServer.js)

###### index.js
Our 'main' file. Kept to minimum size, to allow least dependency. Separating `index.js` and `app.js` allows us to launch the same application with the same code, while changing only the configuration file, thus keeping maximum consistency between environments.

###### logger.js
This project uses `winston` for logging. This file loads the configuration setup for logging. _todo_: logger is now similar for all environments, all files import the same logger file, with the same settings for all environments.  

######package.json
_npm_ installation and dependency file.



###/api

######openapi.yaml
sample file, for future use
 
######swagger.yaml
Project API code is generated based on this file

###/controllers
automatically generated directory

######Controller.js
Parent class, contains code for handling interaction between controller and service classes, and serving back to the client (user) the response (or failure) generated by back-end code.

######Pet.js
New format for controllers. Use this to auto-generate controller files, based on api/swagger.yaml. Every path operation has a field `x-swagger-router-controller`, which is the name of the Controller file, and `operationId` is the name of the method. The method receives `request` and `response` as parameters, and sends those, together with the name of the handling service method to the general `Controller.js` file for future handling. 

######Store.js, User.js
Old format for controllers. This is what is generated with current codegen

######Test.js
Test controller file. It's here temporarily. Eventually it will move to a dedicated directory, and if/when people want to test the system, they will be able to place this test file here and run the tests written to verify the routing process works.

######index.js
A new auto-generated file. Imports all the controllers, and exports an object referencing every controller that was imported.


### /service
Auto generated directory

###### PetService.js
New format of API services. This is a bit more complicated than the controllers generation. The broad logic is similar - yaml paths and operation have `x-swagger-router-controller` for the name of the class/file, and files have methods based on the operationId. Methods receive as arguments the parameters defined in the yaml file, as object members (JavaScript has a shorthand operation where you just type the name of the variable, and it will populate it's value autormtically).

The generation of this file is a bit tricky because we want to deliver stub output based on what is written in the yaml file - is a success response an object or a string? maybe binary? We also want to provide a stub for error responses.

###### Service.js
Parent service class, containing 2 methods for handling successful or failed processes. These are the methods that send back the response to the controller, and from there back to the client. At this point this file is a bit empty, but allows for changes in the future.

###### StoreService.js, UserService.js
Old format service files.

###### TestService.js
Test file. Located here temporarily. Test validating this project run through this service. In the future, this file will be located in a separate directory, with a possibility to import for those who want to run tests. 

###### index.js
Auto generated. Like `index.js` in the `controllers` directory, this is the main file of the `services` directory. This file imports all the services in the directory, and exports an object referencing to all the imported files.

### /tests
All tests are written here. This directory also contains all the necessary files needed in order to run tests - temporary files, configuration files, etc.

- SwaggerRouterTests.js
- config.js
- logger.js
- serverTests.js
- swaggerControllerTests.js
##### /tests/testFiles
- images.png
- pet.json
- swagger.yaml
- testItems.json

### /utils
This is a temporary directory. Will be removed once the files make it to the npm repository and are loaded as part of the npm installation process
###### swaggerRouter.js
This project is depending on 3rd-party library `swagger-express-middleware`. This library does all the validation and processing, except for routing to the controllers generated by this project. `swaggerRouter.js` implements that last leg - collecting the data that was passed and validates this far, and passing it to the relevant controller method.

###### writer.js
Old and obsolete file. Will be removed in the near future.

